{{!< default}}

<main class="gh-main gh-outer homepage">
    <div class="gh-inner">
        {{#get "posts" filter="featured:true" include="authors,tags" limit="5" as |featured|}}
        {{#if featured}}
            <div class="carousel">
                <div class="carousel-track">
                    {{#foreach featured}}
                        <div class="carousel-item">
                            <a href="{{url}}" class="carousel-link">
                                <img src="{{feature_image}}" alt="{{title}}">
                            </a>
                        </div>
                    {{/foreach}}
                </div>
                <!-- 左右箭头 -->
                <button class="carousel-button prev">{{> "icons/carousel-arrow"}}</button>
                <button class="carousel-button next">{{> "icons/carousel-arrow"}}</button>
            </div>
        {{/if}}
        {{/get}}
        <section class="gh-topic gh-topic-grid">
            <h2 class="gh-topic-name">
                {{#match pagination.pages ">" 1}}
                    <a href="{{@site.url}}/page/2">Latest</a>
                {{else}}
                    Latest
                {{/match}}
            </h2>

            <div class="gh-topic-content">
                {{#foreach posts limit="7"}}
                    {{> "loop-grid"}}
                {{/foreach}}
            </div>

            <footer class="gh-topic-footer">
                {{#match pagination.pages ">" 1}}
                    <a class="gh-topic-link" href="{{@site.url}}/page/2">Show more {{> "icons/arrow"}}</a>
                {{/match}}
            </footer>
        </section>

        {{#if @custom.enter_tag_slugs_for_primary_sections}}
            {{#get "tags" filter="slug:[{{@custom.enter_tag_slugs_for_primary_sections}}]"}}
                {{#foreach tags}}
                    {{> "topic-grid"}}
                {{/foreach}}
            {{/get}}
        {{else}}
            {{#match posts.length ">" 1}}
                {{#get "tags" include="count.posts" order="count.posts desc" limit="3"}}
                    {{#foreach tags}}
                        {{> "topic-grid"}}
                    {{/foreach}}
                {{/get}}
            {{/match}}
        {{/if}}

        {{#if @custom.enter_tag_slugs_for_secondary_sections}}
            {{#get "tags" filter="slug:[{{@custom.enter_tag_slugs_for_secondary_sections}}]"}}
                {{#if tags}}
                    <div class="gh-topic-list">
                        {{#foreach tags}}
                            {{> "topic-minimal"}}
                        {{/foreach}}
                    </div>
                {{/if}}
            {{/get}}
        {{else}}
            {{#match posts.length ">" 1}}
                {{#get "tags" include="count.posts" order="count.posts desc"}}
                    {{#if tags.[3]}}
                        <div class="gh-topic-list">
                            {{#foreach tags from="4" limit="3"}}
                                {{> "topic-minimal"}}
                            {{/foreach}}
                        </div>
                    {{/if}}
                {{/get}}
            {{/match}}
        {{/if}}
    </div>
</main>